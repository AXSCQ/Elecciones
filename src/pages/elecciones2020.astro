---
import Layout from '../layouts/Layout.astro';
import EleccionesTimelineHorizontal from '../components/react/EleccionesTimelineHorizontal';

// Definir los datos de las tarjetas aquí en el frontmatter
const cards = [
  {
    title: 'Crisis Política 2019',
    image: '/images/Crisispolitica.jpeg',
    description: 'Tras las elecciones de octubre de 2019, surgieron denuncias de fraude electoral que desencadenaron protestas masivas.'
  },
  {
    title: 'Renuncia de Evo Morales',
    image: '/images/renunciaEVO.jpg',
    description: 'El 10 de noviembre de 2019, Evo Morales renunció a la presidencia tras perder el apoyo de las Fuerzas Armadas.'
  },
  {
    title: 'Gobierno Transitorio',
    image: '/images/gobtransitorio.jpg',
    description: 'Jeanine Áñez asumió la presidencia interina con el mandato de convocar a nuevas elecciones.'
  },
  {
    title: 'Pandemia COVID-19',
    image: '/images/Covid19Bo.jpg',
    description: 'La pandemia obligó a posponer las elecciones programadas inicialmente para mayo de 2020.'
  },
  {
    title: 'Protestas Sociales',
    image: '/images/Enfrentamientos.jpg',
    description: 'Durante el gobierno transitorio se produjeron diversas protestas exigiendo elecciones.'
  },
  {
    title: 'Llamado a Elecciones',
    image: '/images/llamadoElecciones.png',
    description: 'El gobierno transitorio convocó nuevas elecciones para restaurar la democracia.'
  }
];
---

<Layout title="Historia Política - Elecciones Bolivia 2025">
  <!-- Banner con fondo y bandera -->
  <div id="elecciones-background" class="min-h-screen bg-cover bg-center bg-fixed transition-all duration-1000" style="background-image: url('/Fondos/bandera-bolivia.jpeg');">
    <div class="min-h-screen bg-gradient-to-b from-black/40 to-black/50 backdrop-blur-[2px]">
      <section class="relative min-h-[40vh] flex items-center justify-center">
        <div class="relative text-center z-10 py-16">
          <h1 class="text-5xl md:text-6xl font-extrabold drop-shadow-lg">
            <span class="text-yellow-400">ELECCIONES</span> <span class="text-white">2020</span>
          </h1>
          <p class="text-blue-100 text-xl mt-4">Una mirada interactiva al proceso electoral más decisivo de la última década</p>
        </div>
      </section>

      <!-- ELECCIONES 2020 -->
      <section class="flex flex-col md:flex-row items-center justify-center gap-10 px-6 py-16 text-white max-w-7xl mx-auto">
        <!-- Resumen -->
        <div class="md:w-1/2 bg-black/50 backdrop-blur-md p-6 rounded-xl shadow-lg border border-white/10">
          <h2 class="text-2xl font-bold mb-4 text-yellow-400">Elecciones 2020</h2>
          <p class="text-gray-200 leading-relaxed">
            Las elecciones generales de 2020 en Bolivia fueron convocadas tras la crisis política surgida por las denuncias de fraude en los comicios de 2019, donde Evo Morales buscaba un cuarto mandato. 
            Las irregularidades detectadas por la OEA, sumadas a protestas masivas y la presión de las Fuerzas Armadas, llevaron a la renuncia de Morales y su salida del país. 
            Jeanine Áñez asumió un gobierno transitorio con el mandato de convocar nuevas elecciones. Tras varios aplazamientos por la pandemia,
            los comicios se realizaron el 18 de octubre de 2020, dando como resultado el triunfo de Luis Arce, 
            del MAS, con más del 55% de los votos.
          </p>
        </div>
        <!-- Video -->
        <div class="md:w-1/2 w-full">
          <div class="relative w-full pb-[56.25%] h-0 max-h-[350px]">
            <iframe 
              class="absolute top-0 left-0 w-full h-full rounded-xl shadow-lg border border-white/10"
              src="https://www.youtube.com/embed/Mib6218CGN8"
              title="Elecciones Bolivia 2020"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
              loading="lazy">
            </iframe>
          </div>
        </div>
      </section>

      <!-- Línea de tiempo -->
      <section class="bg-gradient-to-b from-black/60 to-black/70 backdrop-blur-sm py-20">
        <div class="px-4 md:px-6 max-w-7xl mx-auto">
          <EleccionesTimelineHorizontal client:load />
        </div>
      </section>

      <!-- Sección de Flip Cards -->
      <section class="bg-black/50 backdrop-blur-sm px-6 py-20 text-white">
        <h2 class="text-3xl font-bold text-center mb-12">
          <span class="text-yellow-400">Temas Clave</span> <span class="text-white">del Proceso Electoral 2019 - 2020</span>
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
          {cards.map(card => (
            <div class="group perspective flex flex-col items-center">
              <h3 class="mb-3 text-lg font-semibold text-yellow-400 text-center">{card.title}</h3>
              <div class="relative w-full h-64 rounded-xl overflow-hidden transition-transform duration-700 transform-style-preserve-3d group-hover:rotate-y-180 border-2 border-yellow-500 shadow-lg hover:shadow-yellow-400/70">
                <!-- Cara frontal -->
                <div class="absolute w-full h-full backface-hidden">
                  <img src={card.image} alt={card.title} class="w-full h-full object-cover" />
                </div>
                <!-- Cara trasera -->
                <div class="absolute w-full h-full rotate-y-180 backface-hidden bg-black/80 backdrop-blur-sm p-6 text-white flex flex-col justify-center border border-white/10">
                  <h4 class="text-base font-bold mb-2 text-yellow-300">{card.title}</h4>
                  <p class="text-sm text-gray-200">{card.description}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </section>
      
      <!-- Barra de progreso -->
      <div class="fixed bottom-0 left-0 w-full h-1 bg-gray-800">
        <div id="progress-bar" class="h-full bg-gradient-to-r from-yellow-400 via-red-500 to-blue-500 w-0 transition-all duration-300"></div>
      </div>
    </div>
  </div>

  <script>
    // Extender la interfaz Window para TypeScript
    declare global {
      interface Window {
        updateEleccionesProgress: (progress: number) => void;
      }
    }
    
    // Script para actualizar la barra de progreso
    document.addEventListener('DOMContentLoaded', () => {    
      // Función para actualizar la barra de progreso
    function updateEleccionesProgress(progress: number): void {
      const progressBar = document.getElementById('progress-bar');
      
      if (progressBar) {
        // Actualizar la barra de progreso
        progressBar.style.width = `${progress * 100}%`;
      }
    }
    
    // Exponer la función para que el componente React pueda usarla
    window.updateEleccionesProgress = updateEleccionesProgress;
    
    // Actualizar la barra de progreso al hacer scroll
    window.addEventListener('scroll', () => {
      const scrollTop = window.scrollY;
      const docHeight = document.body.offsetHeight - window.innerHeight;
      const scrollPercent = scrollTop / docHeight;
      updateEleccionesProgress(scrollPercent);
    });
  });
</script>

</Layout>
